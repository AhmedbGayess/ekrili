const mongoose = require("mongoose");
const validator = require("validator");

const AdSchema = new mongoose.Schema(
  {
    user: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "users",
      required: true
    },
    name: {
      type: String,
      required: true
    },
    phone: {
      type: String,
      required: true,
      validate(value) {
        if (!validator.isMobilePhone(value)) {
          throw new Error("Phone number is invalid");
        }
      }
    },
    title: {
      type: String,
      required: true
    },
    description: {
      type: String,
      required: true
    },
    price: {
      type: Number,
      required: true
    },
    weekPrice: {
      type: Number,
      required: true
    },
    monthPrice: {
      type: Number,
      required: true
    },
    images: [
      {
        type: String,
        required: true
      }
    ],
    category: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "categories",
      required: true
    },
    subCategory: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "subCategories",
      required: true
    },
    governorate: {
      type: String,
      required: true,
      enum: [
        "Ariana",
        "Beja",
        "Ben Arous",
        "Bizerte",
        "Gabes",
        "Gafsa",
        "Jendouba",
        "Kairouan",
        "Kasserine",
        "Kebili",
        "Le Kef",
        "Mahdia",
        "Manouba",
        "Medenine",
        "Monastir",
        "Nabeul",
        "Sfax",
        "Sidi Bouzid",
        "Siliana",
        "Sousse",
        "Tataouine",
        "Tozeur",
        "Tunis",
        "Zaghouan"
      ]
    },
    delegation: {
      type: String,
      required: true,
      enum: [
        "Ariana Ville",
        "Ettadhamon",
        "Kalaat El Andalous",
        "Mnihla",
        "Raoued",
        "Sidi Thabet",
        "La Soukra",
        "Amdoun",
        "Beja Nord",
        "Beja Sud",
        "Goubellat",
        "Medjez El Beb",
        "Nefza",
        "Teboursouk",
        "Testour",
        "Thibar",
        "Ben Arous",
        "Boumhel",
        "El Mourouj",
        "Ezzahra",
        "Fouchana",
        "Hammam Chott",
        "Hammam Lif",
        "M'Hamdia",
        "Medina Jedida",
        "Megrine",
        "Mornag",
        "Rades",
        "Bizerte Nord",
        "Bizerte Sud",
        "Djoumine",
        "El Alia",
        "Ghar El Melh",
        "Ghazela",
        "Jarzouna",
        "Mateur",
        "Menzel Bourguiba",
        "Menzel Jemil",
        "Ras Jebel",
        "Sejenane",
        "Tinja",
        "Utique",
        "El Hamma",
        "El Metouia",
        "Gabes Ville",
        "Gabes Ouest",
        "Gabes Sud",
        "Ghannouch",
        "Mareth",
        "Matmata",
        "Nouvelle Matmata",
        "Menzel Habib",
        "Metouia",
        "Belkhir",
        "Gafsa Nord",
        "Gafsa Sud",
        "Guetar",
        "Ksar",
        "Mdhilla",
        "Metlaoui",
        "Moulares",
        "Redeyef",
        "Sidi Aich",
        "Sned",
        "Aïn Draham",
        "Balta",
        "Bousalem",
        "Fernana",
        "Ghardimaou",
        "Jendouba",
        "Jendouba Nord",
        "Oued Mliz",
        "Tabarka",
        "Alaa",
        "Bouhajla",
        "Chebika",
        "Chrarda",
        "Haffouz",
        "Hajeb El Ayoun",
        "Karouan Nord",
        "Karouan Sud",
        "Nasrallah",
        "Oueslatia",
        "Sbikha",
        "Ayoun",
        "Ezzouhour",
        "Feriana",
        "Foussana",
        "Hassi El Ferid",
        "Hidra",
        "Jedeliane",
        "Kasserine Nord",
        "Kasserine Sud",
        "Majel Belabbes",
        "Sbeitla",
        "Sbiba",
        "Thala",
        "Douz Nord",
        "Douz Sud",
        "Faouar",
        "Kebili Nord",
        "Kebili Sud",
        "Souk El Ahad",
        "Dahmani",
        "El Ksour",
        "Jerissa",
        "Kalaa El Khasba",
        "Kalaat Senane",
        "Le Kef Est",
        "Le Kef Ouest",
        "Le Sers",
        "Nabeur",
        "Sakiet Sidi Youssef",
        "Tejerouine",
        "Touiref",
        "Boumerdes",
        "Chebba",
        "Chorbane",
        "El Jem",
        "Hbira",
        "Ksour Essef",
        "Mahdia",
        "Melloulech",
        "Ouled Chamekh",
        "Sidi Alouane",
        "Souassi",
        "Borj El Amri",
        "Daouar Hicher",
        "El Battan",
        "Jedaida",
        "Manouba",
        "Mornaguia",
        "Oued Ellil",
        "Tebourba",
        "Ben Guerdane",
        "Beni Khedache",
        "Djerba Ajim",
        "Djerba Houmt Souk",
        "Medenine Nord",
        "Medenine Sud",
        "Sidi Makhlouf",
        "Zarzis",
        "Bekalta",
        "Bembla",
        "Beni Hassen",
        "Jammel",
        "Ksar Hellal",
        "Ksibet El Mediouni",
        "Moknine",
        "Monastir",
        "Ouerdanine",
        "Sahline",
        "Sayada Lamta Bouhjar",
        "Teboulba",
        "Zeramdine",
        "Beni Khalled",
        "Beni Khiar",
        "Bou Argoub",
        "Dar Chaabane El Fehri",
        "El Mida",
        "Grombalia",
        "Hammam Ghezaz",
        "Hammamet",
        "Haouaria",
        "Kelibia",
        "Korba",
        "Menzel Bouzelfa",
        "Menzel Temime",
        "Nabeul",
        "Soliman",
        "Takelsa",
        "Agareb",
        "Bir Ali Ben Khelifa",
        "El Amra",
        "El Ghraiba",
        "El Hencha",
        "Esskhira",
        "Jebeniana",
        "Kerkennah",
        "Mahres",
        "Menzel Chaker",
        "Sakiet Eddaier",
        "Sakiet Ezzit",
        "Sfax Ouest",
        "Sfax Sud",
        "Sfax Ville",
        "Thyna",
        "Bir El Hfay",
        "Jelma",
        "Mazzouna",
        "Meknassi",
        "Menzel Bouzaiene",
        "Ouled Haffouz",
        "Regueb",
        "Sabalat Ouled Asker",
        "Sidi Ali Ben Aoun",
        "Sidi Bouzid Est",
        "Sidi Bouuzid Ouest",
        "Souk Jedid",
        "Bargou",
        "Bouarada",
        "El Aroussa",
        "El Krib",
        "Gaafour",
        "Kesra",
        "Makthar",
        "Rouhia",
        "Sidi Bourouis",
        "Siliana Nord",
        "Siliana Sud",
        "Akouda",
        "Bouficha",
        "Enfidha",
        "Hammam Sousse",
        "Hergla",
        "Kalaa Kebira",
        "Kalaa Seghira",
        "Kondar",
        "M'Saken",
        "Sidi Bou Ali",
        "Sidi El Heni",
        "Sousse Jaouhara",
        "Sousse Riadh",
        "Sousse Sidi Abdelhamid",
        "Sousse Ville",
        "Zaouia Ksiba Thrayat",
        "Bir Lahmar",
        "Dhehiba",
        "Ghomrassen",
        "Remada",
        "Samar",
        "Tataouine Nord",
        "Tataouine Sud",
        "Degueche",
        "Hazoua",
        "Nefta",
        "Tamaghza",
        "Tozeur",
        "Bab Bhar",
        "Bab Souika",
        "Bardo",
        "Carthage",
        "El Khadhra",
        "El Menzah",
        "El Ouardia",
        "El Tahrir",
        "Ezzouhour",
        "Hrairia",
        "Jebel Jeloud",
        "Kabaria",
        "La Goulette",
        "La Marsa",
        "Le Kram",
        "Medina",
        "Omrane",
        "Omrane Supérieur",
        "Sidi El Bechir",
        "Sidi Hassine",
        "Sijoumi",
        "Bir Mcherga",
        "Fahs",
        "Nadhour",
        "Saouaf",
        "Zahouan",
        "Zriba"
      ]
    },
    featured: {
      type: Boolean,
      default: false
    },
    featuredExpires: {
      type: Date,
      default: Date.now
    }
  },
  {
    timestamps: true
  }
);

const Ad = mongoose.model("ads", AdSchema);

module.exports = Ad;
